Настройки экрана [2.8 TFT ST7789V](https://aliexpress.ru/item/1005004875729700.html?spm=a2g2w.orderdetail.0.0.36564aa6OWZWRb&sku_id=12000048227640357&_ga=2.171653411.2015733411.1763801020-1071948550.1756303227)

| LCD pin | Raps pin |
|---------|----------|
| VCC | 3.3V |
| Gnd | Gnd |
| CS | GPIO_8 |
| RESET | GPIO_27 |
| DC | GPIO_25 |
| MOSI | GPIO_10|
| SCK | GPIO_11 |
| LED | GPIO_24 |
| MISO | GPIO_9 |
1. Установить "cmake"
2. Поля файла "config.h" для корректной работы экрана
- разворот экрана на 180 градусов (строка 58)
- инверсия цветов (строка 177)
- включение режима <b>USE_DMA_TRANSFER</b> (строка 195), НУЖНО ПРОВЕРИТЬ ПРАВИЛЬНОСТЬ ПРЕДПОЛОЖЕНИЯ!!!
- включить поддержку вкл/выкл подсветка у экранов (строка 198)
3. Иправить разрешение экрана fbcp-ili9341/st7735r.h
```cpp
#if defined(ST7789) || defined(ST7789VW)
#define DISPLAY_NATIVE_WIDTH 240
#define DISPLAY_NATIVE_HEIGHT 320
```
4. Исправить условие на строке 89 (но нужно проверить необходимость!!!)
```cpp
#ifdef ST7789
    // The ST7789 controller is actually a unit with 320x240 graphics memory area, but only 240x240 portion
    // of it is displayed. Therefore if we wanted to swap row address mode above, writes to Y=0...239 range wil$
    // memory in row addresses Y = 319-(0...239) = 319...80 range. To view this range, we must scroll the view $
    // direction so that contents of Y=80...319 is displayed instead of Y=0...239.
    if ((madctl & MADCTL_ROW_ADDRESS_ORDER_SWAP))
      SPI_TRANSFER(0x37/*VSCSAD: Vertical Scroll Start Address of RAM*/, 0, 320 - DISPLAY_NATIVE_HEIGHT);
      //SPI_TRANSFER(0x37/*VSCSAD: Vertical Scroll Start Address of RAM*/, 0, 0);
      //SPI_TRANSFER(0x37/*VSCSAD: Vertical Scroll Start Address of RAM*/, 0, 320 - DISPLAY_WIDTH);
#endif
```

5. Настройка сборки драйвра
```cmake
cmake -DUSE_DMA_TRANSFERS=OFF -DST7789VW=ON -DGPIO_TFT_DATA_CONTROL=24 -DGPIO_TFT_RESET_PIN=25 -DSPI_BUS_CLOCK_DIVISOR=4 -DSTATISTICS=0 -DDISPLAY_BREAK_ASPECT_RATIO_WHEN_SCALING=ON -DDISPLAY_INVERT_COLORS=ON ..
```

6. Выполнить
```bash
make -j
sudo ./fbcp-ili9341
```

7. Добавить в /etc/rc.local
``` bash
sudo /home/spi/fbcp-ili9341/build/fbcp-ili9341 &
```

### Issues
- https://github.com/juj/fbcp-ili9341/issues/230
- https://github.com/juj/fbcp-ili9341/issues/190
- https://krystof.io/mirroring-raspberry-pi-hdmi-video-to-a-st7789-1-3-inch-lcd-display/
- https://robotclass.ru/articles/raspberry-pi-tft-spi/